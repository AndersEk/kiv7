<div class="page-header">
  <h1>
    Your List
    <small>
      <span data-bind="visible: incompleteTasks().length > 0">
        has <span data-bind="text: incompleteTasks().length"></span> <span data-bind="text: incompleteTasks().length == 1 ? 'task' : 'tasks'"></span> left
      </span>
      
      <span data-bind="visible: incompleteTasks().length == 0">is complete</span>
    </small>
  </h1>
</div>

<div class="control-group">

  <form id="new-task" data-bind="submit: createTask">
    <span class="input-prepend">
      <a href="#" class="add-on btn" data-bind="click: createTask"><i class="icon-plus"></i></a>
      <a href="#" class="add-on btn" data-bind="click: resetNewTask"><i class="icon-repeat"></i></a>
      
      <input class="span11" data-bind="value: newTask.name" placeholder="What needs to be done?" />
    </span>
  </form>

</div>

<div id="tasks" class="control-group" data-bind="foreach: tasks">
  <span class="input-prepend">
    <a href="#" class="add-on btn" data-bind="click: $root.toggleTask, visible: done"><i class="icon-star"></i></a>
    <a href="#" class="add-on btn" data-bind="click: $root.toggleTask, visible: open"><i class="icon-star-empty"></i></a>
    
    <a href="#" class="add-on btn" data-bind="click: $root.destroyTask"><i class="icon-remove"></i></a>
    
    <input class="name span11" data-bind="value: name" />
  </span>
</div>

<script type="text/javascript">
  $(function() {
    window.currentViewModel = $.extend(
      new Root.NamespaceViewModel(),
      new Root.ListsViewModel()
    );
    ko.applyBindings(currentViewModel);
  });
</script>
